{% extends "base.html" %}
{% load static %}

{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/doctor/doctor.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="text-center text-primary mb-4">ðŸ©º Doctor Dashboard</h2>

  <div class="card shadow-sm p-4">
    <h5 class="text-info mb-3">ðŸ‘¥ Patient Medical Records</h5>

    <table class="table table-hover table-bordered align-middle">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Full Name</th>
          <th>Age</th>
          <th>Gender</th>
          <th>BMI</th>
          <th>HbA1c</th>
          <th>Glucose</th>
          <th>Hypertension</th>
          <th>Heart Disease</th>
          <th>Smoking</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        {% for patient in patients %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ patient.full_name }}</td>
          <td>{{ patient.age }}</td>
          <td>{{ patient.get_gender_display }}</td>
          <td>{{ patient.bmi }}</td>
          <td>{{ patient.hbA1c_level }}</td>
          <td>{{ patient.blood_glucose_level }}</td>
          <td>
            {% if patient.hypertension %}
              <span class="badge bg-danger">Yes</span>
            {% else %}
              <span class="badge bg-success">No</span>
            {% endif %}
          </td>
          <td>
            {% if patient.heart_disease %}
              <span class="badge bg-danger">Yes</span>
            {% else %}
              <span class="badge bg-success">No</span>
            {% endif %}
          </td>
          <td>{{ patient.smoking_history|default:"-" }}</td>
          <td>{{ patient.clinical_notes|default:"-" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="11" class="text-center">No patient records available.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
